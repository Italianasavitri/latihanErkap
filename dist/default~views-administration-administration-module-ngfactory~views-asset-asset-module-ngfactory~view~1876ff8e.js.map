{"version":3,"sources":["webpack:///./src/app/views/shared/site_search_popup/_searchSite.html","webpack:///./src/app/views/shared/site_search_popup/_searchSite.component.ts","webpack:///./src/app/views/shared/site_search_popup/_searchSite.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yGAqBc,uHAA8C,KAC5C,mMAAyD,YAApD;;wBAA+B;MAApC,wBAAyD,KACvD,4JAAmD,gCAAvB,yHAAsB,GAAlD,YAAmD,EAAvB,SAAsB;yGAnB9D,wHAAyC,KACvC,8IAAuB,KACrB,gJAAyB,KACvB,s/EAAkI,MAChI,iiCAA0C,IAE1C,++BAAiC,IACjC,ogCAAoC,IACpC,w9BAA4B,IAC5B,i9BAA6B,IAE7B,+3CAAuE,MACvE,w5CAAkF,MAClF,k6CAAuF,MACvF,i6CAAuF,MACvF,oiDAC8B,MAC9B,moBAA8C,iDAdf,mBAA6B,iBAAC,+BAAuB,EAAuB,oBAAoB,EAA1C,oBAAqB,EAA5G,YAAkI,EAAjG,SAA6B,EAAC,SAAuB,EAAuB,SAAoB,EAA1C,SAAqB,GACnF,oBAAkB,EAAzC,aAA0C,EAAnB,SAAkB,GAEzB,oBAAgB,EAAhC,aAAiC,EAAjB,SAAgB,GACb,oBAAgB,EAAnC,aAAoC,EAAjB,SAAgB,GACvB,kBAAe,EAA3B,aAA4B,EAAhB,SAAe,GAChB,oBAAiB,EAA5B,aAA6B,EAAlB,SAAiB,GAEU,2BAAmB,EAA7C,gCAAyB,EAAqB,uBAAY,EAAtE,aAAuE,EAAjC,SAAmB,EAA7C,UAAyB,EAAqB,UAAY,GACb,sBAAwB,EAApD,uBAAc,EAA/B,uBAAgB,EAAgB,uBAAY,EAAxD,aAAkF,EAAzB,UAAwB,EAApD,UAAc,EAA/B,UAAgB,EAAgB,UAAY,GACO,qBAAuB,EAAzD,4BAAmB,EAApC,uBAAgB,EAAqB,wBAAa,EAA9D,aAAuF,EAAxB,UAAuB,EAAzD,UAAmB,EAApC,UAAgB,EAAqB,UAAa,GACA,sBAAwB,EAAvD,yBAAgB,EAAnC,yBAAkB,EAAkB,wBAAa,EAA7D,aAAuF,EAAzB,UAAwB,EAAvD,UAAgB,EAAnC,UAAkB,EAAkB,UAAa,GACsB,sBAAwB,EAAC,sBAAsB,EAA7E,yBAAgB,EACnE,+BAA2B,EADF,gCAAyB,EAAxC,qBAAc,EAA4C,uBAAY,EAAlF,aAC8B,EADqD,UAAwB,EAAC,UAAsB,EAA7E,UAAgB,EACnE,UAA2B,EADF,UAAyB,EAAxC,UAAc,EAA4C,UAAY,GAE7E,+BAAwC,EAA7C,aAA8C,EAAzC,UAAwC;yGArB3D,wHAA2B,KACzB,uIAAiB,KACf,oSACkD,YAAhD;;wBAA2B;MAAC;;wBAAmB;MADjD,m2EACkD,MAChD,goBAAyC,iDAF0E,qBAA6B,EAAnD,qBAAqB,EAAhF,sBAAa,EAAC,oBAAkB,EAAC,mCAAyB,EAC5F,mBAA2B,gBADL,qBAAW,EAAnC,YACkD,EADmE,SAA6B,EAAnD,SAAqB,EAAhF,SAAa,EAAC,SAAkB,EAAC,SAAyB,EAC5F,SAA2B,EADL,SAAW,GAE5B,yBAAmC,EAAxC,aAAyC,EAApC,SAAmC;yGAJ9C,6YAA2B,iDAAtB,mBAAqB,gBAA1B,YAA2B,EAAtB,SAAqB;;;;;;;;;;;;;;;;ACA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAKuB;AAGQ;AAcsB;AAGrD;IAaE,6BAAY,OAA0B;QAN5B,qBAAgB,GAAG,IAAI,0DAAY,EAAE,CAAC;QAIhD,cAAS,GAAG,KAAK,CAAC;QAGhB,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;QAClC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QAEtB,IAAI,CAAC,cAAc,GAAG,IAAI,kEAAU,CAAC;YACnC,IAAI,EAAE,UAAU,WAAW;gBAArB,iBA6DL;gBA5DC,IAAI,WAAW,CAAC,MAAM,KAAK,SAAS,EAAE;oBACpC,IAAI,CAAC,GAAQ,EAAE,CAAC;oBAChB,CAAC,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;oBAC1B,OAAO,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,cAAI;wBACjD,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;wBAC3B,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;wBACzB,IAAI,MAAW,CAAC;wBAChB,IAAI,MAAW,CAAC;wBAChB,IAAI,MAAW,CAAC;wBAChB,IAAI,MAAW,CAAC;wBAChB,KAAI,CAAC,YAAY,CAAC,OAAO,CAAC,iBAAO;4BAC/B,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC;4BAC3B,IAAI,MAAM,IAAI,IAAI,EAAE;gCAClB,MAAM,GAAG,CAAC;wCACR,eAAe,EAAE,OAAO,CAAC,aAAa;wCACtC,MAAM,EAAE,OAAO,CAAC,IAAI;wCACpB,OAAO,EAAE,OAAO,CAAC,QAAQ,CAAC,SAAS;wCACnC,MAAM,EAAE,OAAO,CAAC,IAAI;wCACpB,IAAI,EAAE,OAAO,CAAC,EAAE;qCACjB,CAAC,CAAC;6BACJ;4BACD,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;gCACrB,MAAM,CAAC,OAAO,CAAC,kBAAQ;oCACrB,IAAI,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,WAAW,EAAE;wCACnD,MAAM,CAAC,IAAI,CAAC;4CACV,eAAe,EAAE,QAAQ,CAAC,aAAa;4CACvC,MAAM,EAAE,QAAQ,CAAC,IAAI;4CACrB,OAAO,EAAE,QAAQ,CAAC,QAAQ,CAAC,SAAS;4CACpC,MAAM,EAAE,QAAQ,CAAC,IAAI;4CACrB,QAAQ,EAAE,OAAO,CAAC,IAAI;4CACtB,IAAI,EAAE,OAAO,CAAC,EAAE;yCACjB,CAAC;qCACH;oCAED,MAAM,GAAG,QAAQ,CAAC,SAAS,CAAC;oCAC5B,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;wCACrB,MAAM,CAAC,OAAO,CAAC,kBAAQ;4CACrB,IAAI,OAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,WAAW,EAAE;gDACnD,MAAM,CAAC,IAAI,CAAC;oDACV,eAAe,EAAE,QAAQ,CAAC,aAAa;oDACvC,MAAM,EAAE,QAAQ,CAAC,IAAI;oDACrB,OAAO,EAAE,QAAQ,CAAC,QAAQ,CAAC,SAAS;oDACpC,MAAM,EAAE,QAAQ,CAAC,IAAI;oDACrB,QAAQ,EAAE,QAAQ,CAAC,IAAI;oDACvB,IAAI,EAAE,OAAO,CAAC,EAAE;iDACjB,CAAC,CAAC;6CACJ;4CACD,MAAM,GAAG,CAAC,QAAQ,CAAC,SAAS,CAAC;wCAC/B,CAAC,CAAC,CAAC;qCACJ;gCACH,CAAC,CAAC,CAAC;6BACJ;wBACH,CAAC,CAAC,CAAC;wBACH,KAAI,CAAC,cAAc,GAAG,MAAM,CAAC;wBAC7B,OAAO,KAAI,CAAC,cAAc,CAAC;oBAC7B,CAAC,EAAE,aAAG;wBACJ,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;wBAC5B,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACnB,CAAC,CAAC,CAAC;iBACJ;YACH,CAAC;SACF,CAAC,CAAC;IACL,CAAC;IAGD,kCAAI,GAAJ,UAAK,KAAK;QACR,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC;YACzB,KAAK;SACN,CAAC,CAAC;IACL,CAAC;IACD,uCAAS,GAAT,UAAU,EAAE;QACV,IAAI,CAAC,CAAC;QACN,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,gBAAM,IAAI,aAAM,CAAC,aAAa,KAAK,EAAE,EAA3B,CAA2B,CAAC,CAAC,CAAC,CAAC;QAE/E,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IACf,CAAC;IACD,sCAAQ,GAAR;QACE,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAClD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,OAAO,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IACpD,CAAC;IACH,0BAAC;AAAD,CAAC;;;;;;;;;;;;;;AC7HD;AAAA;AAAA;AAAA;AAAkD;AACE;AAIpD;IAII,2BAAoB,IAAgB,EAAU,CAAc;QAAxC,SAAI,GAAJ,IAAI,CAAY;QAAU,MAAC,GAAD,CAAC,CAAa;QAFpD,yBAAoB,GAAG,IAAI,CAAC,CAAC,CAAC,UAAU,GAAG,aAAa,CAAC;IAED,CAAC;IAEjE,uCAAW,GAAX,UAAY,IAAS;QACjB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,oBAAoB,GAAG,+BAA+B,GAAG,IAAI,CAAC,CAAC;IAC7F,CAAC;IACL,wBAAC;AAAD,CAAC","file":"default~views-administration-administration-module-ngfactory~views-asset-asset-module-ngfactory~view~1876ff8e.js","sourcesContent":["<div *ngIf=\"siteSearchVsb\">\r\n  <div id=\"popup1\">\r\n    <dx-popup class=\"popup\" width=\"550\" height=\"auto\" [showTitle]=\"true\" title=\"Find By Site Code\" [dragEnabled]=\"false\" [closeOnOutsideClick]=\"false\"\r\n      [(visible)]=\"siteSearchVsb\" (onHiding)=\"hide()\">\r\n      <div *dxTemplate=\"let data of 'content'\">\r\n        <div class=\"card-body\">\r\n          <div id=\"data-grid-demo\">\r\n            <dx-data-grid id=\"gridContainer\" [dataSource]=\"searchSiteById\" keyExpr=\"siteCodeExist\" [showRowLines]=\"true\" [showBorders]=\"true\">\r\n              <dxo-remote-operations [filtering]=\"true\">\r\n              </dxo-remote-operations>\r\n              <dxo-filter-row [visible]=\"true\"></dxo-filter-row>\r\n              <dxo-header-filter [visible]=\"true\"></dxo-header-filter>\r\n              <dxo-paging [pageSize]=\"10\"></dxo-paging>\r\n              <dxo-pager [showInfo]=\"true\">\r\n              </dxo-pager>\r\n              <dxi-column dataField=\"siteCodeExist\" caption=\"Site Code\" width=\"70px\"></dxi-column>\r\n              <dxi-column dataField=\"unit\" caption=\"Unit\" width=\"80px\" [allowFiltering]=\"false\"></dxi-column>\r\n              <dxi-column dataField=\"name\" caption=\"Site Name\" width=\"125px\" [allowFiltering]=\"true\"></dxi-column>\r\n              <dxi-column dataField=\"parent\" caption=\"Parent\" width=\"125px\" [allowFiltering]=\"false\"></dxi-column>\r\n              <dxi-column [fixed]=\"true\" dataField=\"siteCodeExist\" caption=\"Action\" width=\"55px\" [allowFiltering]=\"false\" [allowSorting]=\"false\"\r\n                cellTemplate=\"siteTemplate\"></dxi-column>\r\n              <div *dxTemplate=\"let data of 'siteTemplate'\">\r\n                <div (click)=\"getIdSite(data.value)\" class=\"text-center\">\r\n                  <i class=\"fa fa-thumb-tack\" id=\"btn{{data.value}}\"></i>\r\n                </div>\r\n              </div>\r\n            </dx-data-grid>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </dx-popup>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport {\r\n  SearchSiteService\r\n} from './_searchSite.service';\r\nimport {\r\n  DxContextMenuModule,\r\n  DxPopupModule,\r\n  DxSelectBoxModule,\r\n  DxTextAreaModule,\r\n  DxFormModule,\r\n  DxFormComponent,\r\n  DxLookupModule,\r\n  DxDateBoxModule,\r\n  DxChartModule,\r\n  DxScrollViewComponent,\r\n  DxScrollViewModule\r\n} from 'devextreme-angular';\r\nimport DataSource from 'devextreme/data/data_source';\r\nimport { OnInit } from '@angular/core/src/metadata/lifecycle_hooks';\r\n\r\n@Component({\r\n  selector: 'app-search-site',\r\n  templateUrl: './_searchSite.html',\r\n  providers: [SearchSiteService]\r\n})\r\nexport class SearchSiteComponent {\r\n  @Input() siteSearchVsb;\r\n  @Output() onHideSiteSearch = new EventEmitter();\r\n\r\n  siteId: any;\r\n  searchSiteById: any;\r\n  sitePopup = false;\r\n\r\n  constructor(service: SearchSiteService) {\r\n    console.log('constructor:', this);\r\n    this.sitePopup = true;\r\n\r\n    this.searchSiteById = new DataSource({\r\n      load: function (loadOptions) {\r\n        if (loadOptions.filter !== undefined) {\r\n          let a: any = [];\r\n          a = loadOptions.filter[2];\r\n          return service.getSiteByID(a).toPromise().then(resp => {\r\n            this.dataSourceSite = resp;\r\n            this.siteChildren = resp;\r\n            let sites1: any;\r\n            let sites2: any;\r\n            let sites3: any;\r\n            let sitess: any;\r\n            this.siteChildren.forEach(element => {\r\n              sites1 = element.childSite;\r\n              if (sitess == null) {\r\n                sitess = [{\r\n                  'siteCodeExist': element.siteCodeExist,\r\n                  'name': element.name,\r\n                  'level': element.siteType.siteLevel,\r\n                  'unit': element.unit,\r\n                  'id': element.id\r\n                }];\r\n              }\r\n              if (sites1.length > 0) {\r\n                sites1.forEach(element1 => {\r\n                  if (typeof (element1.siteCodeExist) !== 'undefined') {\r\n                    sitess.push({\r\n                      'siteCodeExist': element1.siteCodeExist,\r\n                      'name': element1.name,\r\n                      'level': element1.siteType.siteLevel,\r\n                      'unit': element1.unit,\r\n                      'parent': element.name,\r\n                      'id': element.id\r\n                    })\r\n                  }\r\n\r\n                  sites2 = element1.childSite;\r\n                  if (sites2.length > 0) {\r\n                    sites2.forEach(element2 => {\r\n                      if (typeof (element2.siteCodeExist) !== 'undefined') {\r\n                        sitess.push({\r\n                          'siteCodeExist': element2.siteCodeExist,\r\n                          'name': element2.name,\r\n                          'level': element2.siteType.siteLevel,\r\n                          'unit': element2.unit,\r\n                          'parent': element1.name,\r\n                          'id': element.id\r\n                        });\r\n                      }\r\n                      sites3 = (element2.childSite)\r\n                    });\r\n                  }\r\n                });\r\n              }\r\n            });\r\n            this.dataSourceSite = sitess;\r\n            return this.dataSourceSite;\r\n          }, err => {\r\n            console.log('Error  .... ');\r\n            console.log(err);\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  hide(event) {\r\n    this.onHideSiteSearch.emit({\r\n      event\r\n    });\r\n  }\r\n  getIdSite(id) {\r\n    let e;\r\n    e = this.searchSiteById._items.filter(source => source.siteCodeExist === id)[0]\r\n\r\n    this.sitePopup = false;\r\n    this.siteSearchVsb = false;\r\n    this.hide(e);\r\n  }\r\n  showInfo() {\r\n    console.log('siteSearchVsb:', this.siteSearchVsb);\r\n    this.siteSearchVsb = true;\r\n    console.log('siteSearchVsb:', this.siteSearchVsb);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { AppConstant } from '../../../app.constant';\r\nimport { DatePipe } from '@angular/common';\r\nimport notify from 'devextreme/ui/notify';\r\n\r\n@Injectable()\r\nexport class SearchSiteService {\r\n    private resourceUrlSiteChild = this.a.SERVER_URL + '/site_child';\r\n\r\n    constructor(private http: HttpClient, private a: AppConstant) { }\r\n\r\n    getSiteByID(data: any): Observable<any> {\r\n        return this.http.get(this.resourceUrlSiteChild + '/filter?search=siteCodeExist:' + data);\r\n    }\r\n}\r\n"],"sourceRoot":""}